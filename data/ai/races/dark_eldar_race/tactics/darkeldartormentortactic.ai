----------------------------------------
-- File: 'darkeldartormentorTactic.ai'
-- Edited by Cylarne @ 2012
-- Edited by Thudmeizer	@ 05.04.2016

class 'DarkEldarTormentorTactic' (DarkEldarVehicleTactic)

Tormentor = {}

function DarkEldarTormentorTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Dark Eldar Tormentor Tactic")
end

function DarkEldarTormentorTactic:InitAbilities()
	
	if (Tormentor.tracking_id == nil) then
		Tormentor.tracking_id = cpu_manager.stats:GetAbilityID( "dark_eldar_tracking_device_titan" )	
	end
	
	if (Tormentor.rage_id == nil) then
		Tormentor.rage_id = cpu_manager.stats:GetAbilityID( "dark_eldar_rekindle_rage_titan" )	
	end
end

function DarkEldarTormentorTactic:DoAbilities()

	if (self.squad_ai:CanDoAbility(Tormentor.tracking_id)) then
		Ability.DoAbilityTarget(self.squad_ai, Tormentor.tracking_id, Ability.Filters.CloseSquadEnemy, 4)
	end

	if (self.squad_ai:GetMoralePercentage() < 0.3 and self.squad_ai:CanDoAbility(Tormentor.rage_id)) then
		Ability.DoAbilityArea(self.squad_ai, Tormentor.rage_id, Ability.Filters.CloseEnemy, 20, 1)
	end
	
	-- Call standard method
	DarkEldarVehicleTactic.DoAbilities(self)

	--self:DoAbilityVoidShields()
end
--[[
function DarkEldarTormentorTactic:DoAbilityVoidShields()

	-- Check if we should toggle Void Shields
	local id_VoidShields = cpu_manager.stats:GetAbilityID( "dark_eldar_soulshield" )
	local bToggleVoidShields = false
	
	local bIsUsing = self.squad_ai:IsUsingAbility(id_VoidShields)
	local bIsVSonline = self.squad_ai:GetMoralePercentage()
	
	-- Void Shield checker.
	if ((bIsUsing == true and bIsVSonline < 0.1) or
		(bIsUsing == false and bIsVSonline == 1)) then
		bToggleVoidShields = true
	end
	
	-- Void Shields enable/disable
	if (bToggleVoidShields == true and self.squad_ai:CanDoAbility(id_VoidShields)) then
		self.squad_ai:DoSpecialAbility(id_VoidShields)
	end
end
]]