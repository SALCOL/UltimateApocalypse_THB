----------------------------------------
-- File: 'orkvehicletactic.ai'
-- Edited by Thudmeizer		@ 20.06.2016

class 'OrkVehicleTactic' (VehicleTactic)

function OrkVehicleTactic:__init( squad_ai ) super( squad_ai )

	self:SetName("Ork Vehicle Tactic")
end

-- Check if the vehicle should dance away in melee
function OrkVehicleTactic:CheckVehicleDance(sName)

	if (sName == "ork_squad_trukk" or
		sName == "ork_squad_wartrak" or
		sName == "ork_squad_killa_kan" or
		sName == "ork_squad_gun_wagon" or
		sName == "ork_squad_battle_wagon" or
		sName == "ork_squad_deff_dread" or
		sName == "ork_squad_looted_tank" or
		sName == "ork_squad_kill_bursta" or
		sName == "ork_squad_kill_krusha" or
		sName == "ork_squad_battlefortress") then
		return true
	end
	return false
end

function OrkVehicleTactic:DoAbilities()

	-- Trakk and Trukk boost while moving
	if ((not self.squad_ai:IsInCombat() and self.squad_ai:IsInStateMove()) or self.stateID ~= Tactic.StateID.NoState) then
		boost_id = cpu_manager.stats:GetAbilityID( "ork_turbo_boost" )
		if (self.squad_ai:CanDoAbility(boost_id)) then
			self.squad_ai:DoSpecialAbility(boost_id)
		end
	end

	-- RAM!!! - The vehicle will sacrifice combat accuracy in exchange for extra speed and the ability to knock down infantry wherever the vehicle goes.
	-- Vehicle gains a 60% movement speed increase and will knock down infantry continuously on contact.
	local rammingspeed_id = cpu_manager.stats:GetAbilityID( "all_bumpertank" )
	if (self.squad_ai:IsInCombat() and self.squad_ai:IsInStateMove()) then
		if (self.squad_ai:CanDoAbility( rammingspeed_id )) then
			self.squad_ai:DoSpecialAbility( rammingspeed_id )
		end
	end	

	-- Call standard method
	VehicleTactic.DoAbilities(self)
end
